# ìŠ¤í”„ë§(Spring)

## í•™ìŠµ ì¼ì
2025ë…„ 6ì›” 5ì¼


# ğŸ“š Spring AOP ê°œë… ì •ë¦¬

## 1. AOPë¼ëŠ” ê²ƒì€?

AOPÂ·Aspect Oriented Programmingì€ **ê´€ì  ì§€í–¥ í”„ë¡œê·¸ë˜ë°**ì„ ì˜ë¯¸í•œë‹¤.
í”„ë¡œê·¸ë˜ë° ì „ë°˜ì— ê±°ì¹œ \*\*ê³µí†µ ê´€ì‹¬ì‚¬(ë¶€ê°€ ê¸°ëŠ¥)\*\*ì„ ë¶„ë¦¬í•´
**íš¡ë‹¨ ê´€ì‹¬ì‚¬ë¥¼ ëª¨ë“ˆí™”í•˜ì—¬ ê´€ë¦¬**í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” ê¸°ëŠ¥ì´ë‹¤.

### í¬í•¨ ì˜ˆ:
* ì„œë¹„ìŠ¤ ë©”ì„œë“œì— ë¡œê·¸ ì¶œë ¥
* ë³´ì•ˆ ê²€ì‚¬
* íŠ¸ë™ì…˜ ì²˜ë¦¬ ë“±ì˜ ë¶€ê°€ê¸°ëŠ¥

ì´ëŸ¬í•œ ê¸°ëŠ¥ì€ íš¡ë‹¨ì ìœ¼ë¡œ ë‚˜íƒ€ë‚´ì§€ ëª»í•˜ê¸° ë•Œë¬¸ì— AOPë¥¼ í†µí•´ ë¶„ë¦¬í•´ ê´€ë¦¬í•˜ë©´ ê°€ëŠ¥í•˜ë‹¤.

---

## 2. AOP ìš©ì–´ ì •ë¦¬

| ìš©ì–´                | ì„¤ëª…                                                 |
| ----------------- | -------------------------------------------------- |
| **Aspect**        | ê³µí†µ ê¸°ëŠ¥(ì˜ˆ: ë¡œê¹…)ì„ ë‹´ëŠ” í´ë˜ìŠ¤. ex) `LoggingAspect`         |
| **JoinPoint**     | AOPê°€ ì ìš©ë˜ëŠ” ì§€ì . ex) ë©”ì„œë“œ í˜¸ì¶œ ì‹œì                         |
| **Advice**        | ì–¸ì œ ì‹¤í–‰í• ì§€ì— ê´€í•œ ë©”ì„œë“œ. `@Before`, `@After`, etc. |
| **Pointcut**      | ì–´ë“œë°”ì´ìŠ¤ê°€ ì ìš©ë  JoinPointë¥¼ ê²°ì •í•˜ëŠ” í‘œí˜„ì‹                     |
| **Target Object** | ì‹¤ì œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ìˆ˜í–‰í•˜ëŠ” ê°ì²´. ex) `MemberService`            |

---

## 3. AOP íë¦„ êµ¬ì¡°

ê°ì²´ ë©”ì„œë“œê°€ í˜¸ì¶œë˜ë©´,

* Springì€ Pointcutì— ë§ëŠ”ì§€ í™•ì¸
* ë§ë‹¤ë©´ ì œê³µëœ Adviceì™€ Aspectì„ ì ìš©

### ì‹¤í–‰ ìˆœì„œ

```
ê°ì²´ í˜¸ì¶œ
â†’ Pointcut í™•ì¸
â†’ @Around (optional, ë©”ì„œë“œ ì „ í›„ ê°œì…)
â†’ @Before ì‹¤í–‰
â†’ ì‹¤ì œ ë©”ì„œë“œ ì‹¤í–‰
â†’ @After ì‹¤í–‰
â†’ @AfterReturning ì‹¤í–‰ (if ì •ìƒ ì¢…ë£Œ)
```

---

## 4. AOP ì˜ˆì‹œ ì½”ë“œ

### 4.1. Pointcut ì •ì˜

```java
@Pointcut("execution(* com.ohgiraffers.aop.*Service.*(..))")
public void logPointcut() {}
```

* `execution` í‘œí˜„ì‹ì€ ë©”ì„œë“œ ì‹¤í–‰ ì‹œì ì„ ì§€ì •
* `*Service.*(..)` â†’ Serviceë¡œ ëë‚˜ëŠ” í´ë˜ìŠ¤ì˜ ëª¨ë“  ë©”ì„œë“œ

### 4.2. @Before

```java
@Before("LoggingAspect.logPointcut()")
public void logBefore(JoinPoint joinPoint) { ... }
```

* ì‹œì‘ ì „ì— ì‹¤í–‰
* `JoinPoint` â†’ ëŒ€ìƒ ê°ì²´, ë©”ì„œë“œ, ì¸ì í™•ì¸

### 4.3. @After

```java
@After("logPointcut()")
public void logAfter(JoinPoint joinPoint) { ... }
```

* ì‹œì‘ í›„ì— ì‹¤í–‰
* ì˜ˆì™¸ ë˜ëŠ” ì •ìƒì— ê´€ê³„ ì—†ì´ ë¬´ì¡°ê±´ ì‹¤í–‰

### 4.4. @AfterReturning

```java
@AfterReturning(pointcut = "logPointcut()", returning = "result")
public void logAfterReturning(JoinPoint joinPoint, Object result) { ... }
```

* ì •ìƒì ìœ¼ë¡œ ë©”ì„œë“œê°€ ì¢…ë£Œëœ í›„ ì‹¤í–‰
* `returning` í‚¤ì›Œë“œ ë§¤ê°œ ë³€ìˆ˜ ì´ë¦„ì´ ê°™ì•„ì•¼ í•¨

### 4.5. @Around

```java
@Around("logPointcut()")
public Object logAround(ProceedingJoinPoint pjp) throws Throwable {
    System.out.println("ë©”ì„œë“œ ì‹¤í–‰ ì „: " + pjp.getSignature());
    Object result = pjp.proceed();
    System.out.println("ë©”ì„œë“œ ì‹¤í–‰ í›„: " + pjp.getSignature());
    return result;
}
```

* ì „ì²´ ê³¼ì •ì— ê°œì…
* `proceed()` í˜¸ì¶œì´ í•„ìš” (ì‹¤ì œ ë©”ì„œë“œ ì‹¤í–‰)
* ê°€ì¥ ìœ ì—°í•œ ë°©ì‹

---

## 5. AOP ì¥ì  ì •ë¦¬

* ì¤‘ë³µ ì½”ë“œ ì œê±°
* ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ ê³µí†µ ê¸°ëŠ¥ ë¶„ë¦¬
* ê³µí†µ ë¡œì§ì˜ ì¬ì‚¬ìš©ê³¼ ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ

---

# Spring MVC ìš”ì²­ ì²˜ë¦¬ íë¦„ & @RequestMapping ì´í•´

## 1. Spring Web MVC ë€?

* ì›¹ ì•± ê°œë°œì„ ìœ„í•œ Springì˜ ê¸°ë³¸ MVC êµ¬ì¡°
* \*\*MVC (Model-View-Controller)\*\*êµ¬ì¡°ë¥¼ ë”°ë¼ êµ¬í˜„
* DI(ì˜ì¡´ì„± ì£¼ì…) ë° í•´ë‹¹ ê°ì²´ ê´€ë¦¬ êµ¬ì¡° ë™ì‘

### ê° ê³„ì¸µì˜ ì—­í• 

| ê³„ì¸µ         | ì„¤ëª…                     |
| ---------- | ---------------------- |
| Controller | ì‚¬ìš©ìì˜ ìš”ì²­ì„ ë°›ì•„ í•„ìš”í•œ ì„œë¹„ìŠ¤ í˜¸ì¶œ |
| Service    | ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ ìˆ˜í–‰             |
| DAO        | DB ì ‘ê·¼ ë° ë°ì´í„° ì²˜ë¦¬         |
| Model      | Viewì— ì „ë‹¬í•  ë°ì´í„° ê°ì²´       |
| View       | ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì¤„ í™”ë©´ ìƒì„±        |

---

## 2. ìš”ì²­ ì²˜ë¦¬ íë¦„ ìš”ì•½

```
ì‚¬ìš©ì â†’ DispatcherServlet â†’ HandlerMapping â†’ Controller â†’ Model ë°˜í™˜ â†’ ViewResolver â†’ View â†’ ì‚¬ìš©ì
```

| êµ¬ì„± ìš”ì†Œ             | ì„¤ëª…                    |
| ----------------- | --------------------- |
| DispatcherServlet | ëª¨ë“  ìš”ì²­ì˜ ì‹œì‘ì             |
| HandlerMapping    | ìš”ì²­ì— ì•Œë§ì€ Controller íƒìƒ‰ |
| Controller        | ì‹¤ì œ ìš”ì²­ ì²˜ë¦¬ ë° Model ì‘ì„±   |
| ViewResolver      | View ì´ë¦„ì„ í…œí”Œë¦¿ íŒŒì¼ë¡œ ë³€í™˜   |
| View              | ì‚¬ìš©ìì—ê²Œ ìµœì¢… í™”ë©´ ì¶œë ¥        |

---

## 3. @RequestMapping ì‚¬ìš©ë²•

```java
@Controller
public class MenuController {
    @RequestMapping("/menu/regist")
    public String registMenu(Model model) {
        model.addAttribute("message", "ë©”ë‰´ ë“±ë¡ í˜ì´ì§€ì…ë‹ˆë‹¤.");
        return "mappingResult";
    }
}
```

### Thymeleaf View ì˜ˆì‹œ

```html
<h3 th:text="${message}"></h3>
```

---

## 4. ìš”ì²­ ë°©ì‹ ì§€ì •

```java
@RequestMapping(value = "/menu/modify", method = RequestMethod.GET)
public String modifyMenu(Model model) {
    model.addAttribute("message", "GET ìš”ì²­ë§Œ ì²˜ë¦¬ë©ë‹ˆë‹¤.");
    return "mappingResult";
}
```

* POSTë¡œ ì ‘ê·¼ ì‹œ 405 ì—ëŸ¬ ë°œìƒ ê°€ëŠ¥

---

## 5. ìš”ì²­ ë°©ì‹ ì „ìš© ì–´ë…¸í…Œì´ì…˜ (@GetMapping ë“±)

| HTTP   | ì–´ë…¸í…Œì´ì…˜          |
| ------ | -------------- |
| GET    | @GetMapping    |
| POST   | @PostMapping   |
| PUT    | @PutMapping    |
| DELETE | @DeleteMapping |
| PATCH  | @PatchMapping  |

---

## 6. í´ë˜ìŠ¤ ë ˆë²¨ ë§¤í•‘

```java
@Controller
@RequestMapping("/order/*")
public class OrderController {
    @GetMapping("/regist")
    public String registOrder(Model model) {
        model.addAttribute("message", "ì£¼ë¬¸ ë“±ë¡");
        return "mappingResult";
    }
}
```

### ë‹¤ì¤‘ ê²½ë¡œ ì§€ì •

```java
@RequestMapping(value = {"modify", "delete"}, method = RequestMethod.POST)
public String modifyOrDelete(Model model) {
    model.addAttribute("message", "ìˆ˜ì • ë˜ëŠ” ì‚­ì œ ì²˜ë¦¬");
    return "mappingResult";
}
```

---

## 7. @PathVariable ì‚¬ìš©ë²•

```java
@GetMapping("/detail/{orderNo}")
public String detail(@PathVariable("orderNo") int orderNo, Model model) {
    model.addAttribute("message", orderNo + "ë²ˆ ì£¼ë¬¸ ìƒì„¸ ì¡°íšŒ");
    return "mappingResult";
}
```

* ì˜ëª»ëœ ê²½ë¡œê°’ â†’ 400 ì—ëŸ¬ ë°œìƒ ê°€ëŠ¥

---

## 8. ê¸°íƒ€ ìš”ì²­ ì²˜ë¦¬

```java
@RequestMapping
public String otherRequest(Model model) {
    model.addAttribute("message", "ì•„ì§ ì¤€ë¹„ë˜ì§€ ì•Šì€ ê¸°ëŠ¥ì…ë‹ˆë‹¤.");
    return "mappingResult";
}
```

---

## 9. @RequestParam ì‚¬ìš©ë²•

### ê¸°ë³¸ ì‚¬ìš©

```java
@PostMapping("/menu/modify")
public String modifyMenu(@RequestParam String modifyName, Model model) {
    model.addAttribute("message", modifyName + "ìœ¼ë¡œ ë©”ë‰´ ì´ë¦„ì´ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.");
    return "mappingResult";
}
```

### ì£¼ìš” ì†ì„± ì •ë¦¬

| ì†ì„±           | ì„¤ëª…                  |
| ------------ | ------------------- |
| value        | íŒŒë¼ë¯¸í„° ì´ë¦„ ì§€ì •          |
| required     | í•„ìˆ˜ ì—¬ë¶€ ì„¤ì • (ê¸°ë³¸ê°’ true) |
| defaultValue | ê°’ ì—†ì„ ê²½ìš° ê¸°ë³¸ê°’ ì„¤ì •      |

### íŒŒë¼ë¯¸í„° ì´ë¦„ì´ ë‹¤ë¥¼ ë•Œ

```java
@PostMapping("/menu/rename")
public String rename(@RequestParam("newName") String name, Model model) {
    model.addAttribute("message", name + "ìœ¼ë¡œ ì´ë¦„ ë³€ê²½");
    return "mappingResult";
}
```

### í•„ìˆ˜ ì•„ë‹˜ ì„¤ì •

```java
@GetMapping("/optional")
public String optionalParam(@RequestParam(required = false) String note, Model model) {
    model.addAttribute("message", note != null ? note : "ë©”ëª¨ ì—†ìŒ");
    return "mappingResult";
}
```

### ê¸°ë³¸ê°’ ì„¤ì •

```java
@GetMapping("/discount")
public String discount(@RequestParam(defaultValue = "0") int rate, Model model) {
    model.addAttribute("message", "í• ì¸ìœ¨: " + rate + "%");
    return "mappingResult";
}
```

### Mapìœ¼ë¡œ íŒŒë¼ë¯¸í„° ì¼ê´„ ìˆ˜ì‹ 

```java
@PostMapping("/menu/modifyAll")
public String modifyAll(@RequestParam Map<String, String> params, Model model) {
    String name = params.get("modifyName2");
    int price = Integer.parseInt(params.get("modifyPrice2"));
    model.addAttribute("message", name + "ìœ¼ë¡œ ì´ë¦„, " + price + "ì›ìœ¼ë¡œ ê°€ê²© ë³€ê²½ë¨");
    return "mappingResult";
}
```

---

## ëŠë‚€ì 

- Spring MVCì˜ ê¸°ë³¸ êµ¬ì¡°ì™€ ìš”ì²­ ì²˜ë¦¬ íë¦„ì„ ì´í•´í•¨<br>
â†’ DispatcherServletì´ ëª¨ë“  ìš”ì²­ì„ ë°›ì•„ Controller â†’ Service â†’ Viewë¡œ ì—°ê²°ë¨

- ìš”ì²­ê³¼ ë©”ì„œë“œ ë§¤í•‘ ë°©ì‹ì— ëŒ€í•œ ì´í•´ í–¥ìƒ<br>
â†’ @RequestMappingìœ¼ë¡œ URLê³¼ ë©”ì„œë“œ ì—°ê²°
â†’ @GetMapping, @PostMapping ë“±ì€ ê·¸ ì¶•ì•½í˜•ìœ¼ë¡œ ì§ê´€ì  ì‚¬ìš© ê°€ëŠ¥

- RESTful URL ì²˜ë¦¬ ë°©ë²• í•™ìŠµ<br>
â†’ @PathVariableì„ í†µí•´ URL ê²½ë¡œì—ì„œ ì§ì ‘ ê°’ ì¶”ì¶œ
â†’ @RequestParamì„ í†µí•´ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ì¶”ì¶œ ê°€ëŠ¥

- Thymeleafì™€ ê°™ì€ ë·° í…œí”Œë¦¿ê³¼ì˜ ì—°ë™ í•™ìŠµ<br>
â†’ Controllerì—ì„œ ì „ë‹¬í•œ Model ë°ì´í„°ë¥¼ Viewì—ì„œ í‘œí˜„ ê°€ëŠ¥

